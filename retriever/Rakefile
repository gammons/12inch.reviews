require_relative "retrieve"
require_relative "lib/db_setup"

desc "Backfill all the albums"
task :backfill do
  Retriever.new.backfill
end

desc "Refresh for new albums"
task :refresh do
  Retriever.new.refresh
end

task :create_albums_json_files do
  Retriever.new.create_albums_json_files
end

task :setup_db do
  DBSetup.new.create!
end

task :docker_build do
  `docker build -t gammons1/12inch.reviews:latest .`
  `docker push gammons1/12inch.reviews:latest`
end

task :test do
  puts "testing!"
  puts "SPOTIFY_CLIENT_ID = '#{ENV['SPOTIFY_CLIENT_ID']}'"
  puts "SPOTIFY_CLIENT_SECRET = '#{ENV['SPOTIFY_CLIENT_SECRET']}'"
end

task default: :refresh
